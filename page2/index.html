
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>非正常生活 << [Idea, Code, Life]</title>
    
    <meta name="author" content="Liu Lantao">
    <meta property="wb:webmaster" content="08beceac65f1ad4f" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">


    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
    <link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/default.min.css">
  </head>

  <body>

  <div class="navbar-wrapper">
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">非常规思维研究所</a>
          <ul class="nav">
            <li><a href="/">首页</a></li>
            
            
            


  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      	
      	<li><a href="/urls_for_nerd.html">Nerd URLs</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  




          </ul>
        </div>
      </div>
    </div>
  </div>

    <div class="container">

      <div class="content">
        

<div class='container'>
  <div class='span8'>

  <!-- Pagination links -->
  
    <ul class="pager">

  <li class="previous">
  
    <a href="/">&larr; Previous</a>
  
  </li>



  <li class="next">
    <a href="/page3">Next &rarr;</a>
  </li>

</ul>

  

  
    <div class="full">
      <span class="date full-date">
        <abbr class="published" title="2012-10-22 00:00:00 +0800">22 Oct 2012</abbr>
      </span>
      <h3 class="entry-title">
        <a href="/Technology/Linux/2012/10/22/squid-ulimit-n.html" title="ulimit -n的重要性" rel="bookmark">ulimit -n的重要性</a>
      </h3>
      <p class="alt-font tight">
        <span>
          
        </span>
      </p>
      <div class="row">
        <div class="span8 entry-content full-content" style='background-color: #FFF; padding: 10px;'>
          
<p>最近发现有几个squid实例的稳定性成问题，对比了环境设置，分析了几个可能的因素。</p>

<p>1    由于squid前使用了nginx，为了减少连接开销，开启了keepalive连接。keepalive机制存在一些问题，如客户端不停止发送请求，nginx不会中止与后端服务的连接，这将造成squid的访问压力无法在短时间内调整。不过分析了这个情形，问题不全在这里。</p>

<p>2    发现连接数的最高值稳定在2000左右。看到这个数字，寻思会不会与连接数限制有关。曾经遇到过memcached由于默认1024个连接数用完而不提供服务的现象，吞吐率在瞬间降低为0。由于squid与nginx跑在同一台服务器上，2k恰好约对应squid的1024个连接数。</p>

<p>基于假设2，查看了squid进程的limits。</p>

<p>[root@BJCER210-63 ~]# cat /proc/17174/limits 
 Limit                     Soft Limit           Hard Limit           Units   <br />
 Max cpu time              unlimited            unlimited            seconds <br />
 Max file size             unlimited            unlimited            bytes   <br />
 Max data size             unlimited            unlimited            bytes   <br />
 Max stack size            8388608              unlimited            bytes   <br />
 Max core file size        0                    unlimited            bytes   <br />
 Max resident set          unlimited            unlimited            bytes   <br />
 Max processes             128577               128577               processes 
 Max open files            1024                 4096                 files   <br />
 Max locked memory         65536                65536                bytes   <br />
 Max address space         unlimited            unlimited            bytes   <br />
 Max file locks            unlimited            unlimited            locks   <br />
 Max pending signals       128577               128577               signals <br />
 Max msgqueue size         819200               819200               bytes   <br />
 Max nice priority         0                    0                  <br />
 Max realtime priority     0                    0                  <br />
 Max realtime timeout      unlimited            unlimited            us        </p>

<p>果然Max open files只有默认的1024。查看另外一台更稳定的squid服务器，发现这个值都是65535。</p>

<p>于是准备了一个测试环境，验证了squid启动时设置ulimit -n的重要性：squid后端使用nginx做源并使用nginx-delay设置延时5s，squid进程启动前不设置ulimit及设置为65535，增加并发数，查看各自的表现。</p>

<ul>
  <li>ulimit -n为系统默认1024时，并发数达到800左右吞吐量下降到接近零；</li>
  <li>设置ulimit -n 65535时，并发数增加吞吐量亦增加。</li>
</ul>

<p>假设得到证明，可以推断后端性能变差时，由于可用文件数用完而无法开启新的连接。ulimit -n需要设置足够大才能保证squid的稳定。</p>

          <a href="/Technology/Linux/2012/10/22/squid-ulimit-n.html" class="read_more span2 pull-right">[ Read More ]</a>
          <div class="clear"></div>
        </div>
        <div class="span3">
          
          <span>
            Posted in&nbsp;
            <ul>
            
              <li><a href="/categories.html#Technology-ref" title="Technology" rel="category tag">Technology</a></li>
            
              <li><a href="/categories.html#Linux-ref" title="Linux" rel="category tag">Linux</a></li>
            
            </ul>
          </span>
          
          
            <h4>Tags</h4>
            <ul class="tag_box">
            
            


  
     
    	<li><a href="/tags.html#ulimit-ref">ulimit <span>1</span></a></li>
     
    	<li><a href="/tags.html#squid-ref">squid <span>1</span></a></li>
    
  



            </ul>
           
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="rule"><hr/></div>
  
    <div class="full">
      <span class="date full-date">
        <abbr class="published" title="2012-09-14 00:00:00 +0800">14 Sep 2012</abbr>
      </span>
      <h3 class="entry-title">
        <a href="/Technology/Linux/2012/09/14/edac.html" title="EDAC" rel="bookmark">EDAC</a>
      </h3>
      <p class="alt-font tight">
        <span>
          
        </span>
      </p>
      <div class="row">
        <div class="span8 entry-content full-content" style='background-color: #FFF; padding: 10px;'>
          
<h1 id="edac-overview">EDAC Overview</h1>
<p>EDAC (Error Detection and Correction) is a set of Linux kernel modules for handling hardware-related errors. </p>

<p>Its major focus has been ECC memory error handling, however it also detects and reports PCI bus parity errors. </p>

<p>EDAC通过sysfs方式获得硬件的信息。检测到问题时，在syslog中可以看到这样的日志：</p>

<pre><code>kernel: EDAC MC1: CE row 0, channel 0, label "": Corrected error (Socket=1 channel=0 dimm=0)
</code></pre>

<p>有一个叫做edac-util的工具，可以用来查看更详细的状态报表。</p>

<pre><code>$ edac-util -r
mc1: csrow0: ch0: 43722040 Corrected Errors
</code></pre>

<p>上面的输出表示有较多的可修复错误（Corrected Errors - CE）被发现。</p>

<p>edac-util的安装，在RHEL或CentOS上，可以通过yum安装：</p>

<pre><code>yum install edac-util -y
</code></pre>

<h1 id="links">Links</h1>

<p>[http://www.kernel.org/doc/Documentation/edac.txt EDAC - Error Detection And Correction]</p>

<p>[http://bluesmoke.sourceforge.net EDAC Project]</p>

          <a href="/Technology/Linux/2012/09/14/edac.html" class="read_more span2 pull-right">[ Read More ]</a>
          <div class="clear"></div>
        </div>
        <div class="span3">
          
          <span>
            Posted in&nbsp;
            <ul>
            
              <li><a href="/categories.html#Technology-ref" title="Technology" rel="category tag">Technology</a></li>
            
              <li><a href="/categories.html#Linux-ref" title="Linux" rel="category tag">Linux</a></li>
            
            </ul>
          </span>
          
          
            <h4>Tags</h4>
            <ul class="tag_box">
            
            


  
     
    	<li><a href="/tags.html#EDAC-ref">EDAC <span>1</span></a></li>
    
  



            </ul>
           
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="rule"><hr/></div>
  
    <div class="full">
      <span class="date full-date">
        <abbr class="published" title="2012-09-06 00:00:00 +0800">06 Sep 2012</abbr>
      </span>
      <h3 class="entry-title">
        <a href="/Technology/2012/09/06/object-c-programming-notes-1.html" title="Object C Programming Notes 1 - Objects, Classes and Messaging" rel="bookmark">Object C Programming Notes 1 - Objects, Classes and Messaging</a>
      </h3>
      <p class="alt-font tight">
        <span>
          
        </span>
      </p>
      <div class="row">
        <div class="span8 entry-content full-content" style='background-color: #FFF; padding: 10px;'>
          
<h2 id="section">消息机制</h2>

<p>类似函数调用，Object C中采用消息机制，基本调用语法如下：    </p>

<pre><code>[receiver message]
</code></pre>

<p>接收方receiver是一个对象，传递的消息通知该对象进行操作的方法名。消息传递的方法名经常叫做selector。  </p>

<p>可以使用点(.)操作符访问对象的accessor方法。</p>

<p>给nil发消息是允许的——在运行时它仅仅是没有任何效果：消息发送给nil并返回nil。</p>

<p>消息传递的方法对接收方的实例变量有访问权限。</p>

<p>多态：不同类对象有相同的方法。</p>

<h2 id="section-1">方法调用与消息的区别</h2>

<p>方法调用：在编译阶段就已确定其方法和参数；  </p>

<p>消息：运行阶段消息发送时才有运行时环境确定。Dynamic binding / Dynamic Method Resolution</p>

<h2 id="dot-syntax">Dot Syntax</h2>

<p>点（.）操作符与消息的使用<br />
    myInstance.value = 10;
    [myInstance setValue:10];</p>

<h1 id="nsobject">NSObject</h1>

<p>继承(Inheriting Methods)</p>

<p>覆盖继承来的方法，但是不能覆盖继承来的变量（因为继承时内存已分配）。</p>

<p>抽象类（Abstract Classes）</p>

<h1 id="class-types">Class Types</h1>

<h2 id="static-typing">静态类型Static Typing</h2>

<p>编译器可以做类型检查</p>

<h2 id="type-introspection">内省Type Introspection</h2>
<p>运行时获知类型等信息。</p>

<h1 id="class-objects">Class Objects</h1>

<p>A class definition contains various kinds of information, much of it about instances of the class:<br />
-    The name of the class and its superclass
-    A template describing a set of instance variables
-    The declarations of method names and their return and parameter types
-    The method implementations</p>

<h2 id="class-methods-vs-instance-methods">Class Methods vs. Instance Methods</h2>

<pre><code>int versionNumber = [Rectangle version];

id aClass = [anObject class];
id rectClass = [Rectangle class];

Class aClass = [anObject class];
Class rectClass = [Rectangle class];
</code></pre>

<p>Cloass Objects的类型都是Class。</p>

<h1 id="section-2">创建实例</h1>

<pre><code>id  myRectangle;

myRectangle = [Rectangle alloc];
</code></pre>

<p>初始化实例状态<br />
    myRectangle = [[Rectangle alloc] init];</p>

<p>变量</p>

<p><a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html">The Objective-C Programming Language</a></p>

          <a href="/Technology/2012/09/06/object-c-programming-notes-1.html" class="read_more span2 pull-right">[ Read More ]</a>
          <div class="clear"></div>
        </div>
        <div class="span3">
          
          <span>
            Posted in&nbsp;
            <ul>
            
              <li><a href="/categories.html#Technology-ref" title="Technology" rel="category tag">Technology</a></li>
            
            </ul>
          </span>
          
          
            <h4>Tags</h4>
            <ul class="tag_box">
            
            


  
     
    	<li><a href="/tags.html#Object C-ref">Object C <span>1</span></a></li>
     
    	<li><a href="/tags.html#Mac OSX-ref">Mac OSX <span>1</span></a></li>
     
    	<li><a href="/tags.html#Programming-ref">Programming <span>1</span></a></li>
     
    	<li><a href="/tags.html#Language-ref">Language <span>1</span></a></li>
    
  



            </ul>
           
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="rule"><hr/></div>
  
    <div class="full">
      <span class="date full-date">
        <abbr class="published" title="2012-08-26 00:00:00 +0800">26 Aug 2012</abbr>
      </span>
      <h3 class="entry-title">
        <a href="/Technology/2012/08/26/index-page-update.html" title="减少首页文字量" rel="bookmark">减少首页文字量</a>
      </h3>
      <p class="alt-font tight">
        <span>
          
        </span>
      </p>
      <div class="row">
        <div class="span8 entry-content full-content" style='background-color: #FFF; padding: 10px;'>
          
<p>尝试减少了首页文件的文字量。</p>

<p>昨天查看监控宝和google analytics数据，发现首页加载时间跳出率都比较高，简单分析发觉首页给出了太多的文字内容，而不包含容易查询的内容列表。这可能造成读者不容易查找到需要的内容。</p>

<p>基于此，对首页的内容做了一个缩减尝试。作为第一次修改，把首页的日志全文去掉，替代以文章列表。同时对翻页参数进行了简单调整。调整完毕的页面大小为20k左右，应该能带来不小的速度提升。</p>


          <a href="/Technology/2012/08/26/index-page-update.html" class="read_more span2 pull-right">[ Read More ]</a>
          <div class="clear"></div>
        </div>
        <div class="span3">
          
          <span>
            Posted in&nbsp;
            <ul>
            
              <li><a href="/categories.html#Technology-ref" title="Technology" rel="category tag">Technology</a></li>
            
            </ul>
          </span>
          
           
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="rule"><hr/></div>
  
    <div class="full">
      <span class="date full-date">
        <abbr class="published" title="2012-08-18 00:00:00 +0800">18 Aug 2012</abbr>
      </span>
      <h3 class="entry-title">
        <a href="/Technology/2012/08/18/mac-osx-development-environment-setup.html" title="Mac OSX development environment setup" rel="bookmark">Mac OSX development environment setup</a>
      </h3>
      <p class="alt-font tight">
        <span>
          
        </span>
      </p>
      <div class="row">
        <div class="span8 entry-content full-content" style='background-color: #FFF; padding: 10px;'>
          
<h1 id="what-to-setup">What to setup?</h1>

<ul>
  <li>xcode</li>
  <li>git</li>
  <li>Homebrew</li>
  <li>RVM: Ruby Version Manager</li>
  <li>textmate: popular code editor</li>
  <li>macruby</li>
</ul>

<h1 id="progressing">PROGRESSING</h1>

<h2 id="xcode">xcode</h2>
<p>Install from App Store. This very difficulty is that it takes too long to download, especially in China.</p>

<p>I swithed my local DNS to a Taiwan host (168.95.1.1), so it finished in serveral hours.</p>

<h2 id="git">git</h2>
<p>Download recent stable release of git for mac from <a href="http://git-scm.com/downloads">git-scm.com</a></p>

<p>Install other tools related to git: 
*  <a href="http://mac.github.com">GitHub for Mac</a> 
*  <a href="https://github.com/trybeee/GitStats">GitStats</a>: generate stats web pages for your project  </p>

<h2 id="homebrew">Homebrew</h2>
<p>Simple installation with one-line-command: </p>

<pre><code>ruby &lt;(curl -fsSkL raw.github.com/mxcl/homebrew/go)
</code></pre>

<p>Usage example: </p>

<pre><code>brew search textmate
brew install ninja  # need when building textmate
brew install wget
</code></pre>

<h2 id="rvm">RVM</h2>
<p><a href="https://rvm.io">RVM</a> is short for Ruby Version Manager, not Ruby Virtual Machine. </p>

<p>Install stable version with default ruby[-1.9.3] </p>

<pre><code>curl -kL https://get.rvm.io | bash -s stable --ruby
</code></pre>

<p>When every thing reports ok, run this command to see installed versions of ruby in a new term: </p>

<pre><code>rvm list
</code></pre>

<p>Switch to system version </p>

<pre><code>rvm use system
rvm use system --default
</code></pre>

<h2 id="textmate">textmate</h2>
<p>I choose build textmate from source. follow <a href="https://github.com/textmate/textmate/#building">this document</a> </p>

<p>First, install dependencies </p>

<pre><code>brew install ragel boost multimarkdown hg ninja
</code></pre>

<p>Get and prepare source code </p>

<pre><code>git clone git://github.com/textmate/textmate.git
cd textmate
git submodule update --init
</code></pre>

<p>Configure and build </p>

<pre><code>./configure &amp;&amp; ninja
</code></pre>

<h2 id="macruby">macruby</h2>
<p><a href="http://macruby.org">MacRuby</a> is an implementation of Ruby 1.9 directly on top of Mac OS X core technologies. </p>

<p>Install with rvm </p>

<pre><code>rvm install macruby-head
</code></pre>

<p><a href="http://www.rubymotion.com">RubyMotion</a> for iOS development. </p>

          <a href="/Technology/2012/08/18/mac-osx-development-environment-setup.html" class="read_more span2 pull-right">[ Read More ]</a>
          <div class="clear"></div>
        </div>
        <div class="span3">
          
          <span>
            Posted in&nbsp;
            <ul>
            
              <li><a href="/categories.html#Technology-ref" title="Technology" rel="category tag">Technology</a></li>
            
            </ul>
          </span>
          
          
            <h4>Tags</h4>
            <ul class="tag_box">
            
            


  
     
    	<li><a href="/tags.html#xcode-ref">xcode <span>1</span></a></li>
     
    	<li><a href="/tags.html#git-ref">git <span>2</span></a></li>
     
    	<li><a href="/tags.html#homebrew-ref">homebrew <span>1</span></a></li>
     
    	<li><a href="/tags.html#rvm-ref">rvm <span>3</span></a></li>
     
    	<li><a href="/tags.html#textmate-ref">textmate <span>1</span></a></li>
     
    	<li><a href="/tags.html#macruby-ref">macruby <span>1</span></a></li>
    
  



            </ul>
           
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="rule"><hr/></div>
  
    <div class="full">
      <span class="date full-date">
        <abbr class="published" title="2012-08-06 00:00:00 +0800">06 Aug 2012</abbr>
      </span>
      <h3 class="entry-title">
        <a href="/Technology/2012/08/06/jekyll-bootstrap.html" title="切换到jekyll bootstrap" rel="bookmark">切换到jekyll bootstrap</a>
      </h3>
      <p class="alt-font tight">
        <span>
          
        </span>
      </p>
      <div class="row">
        <div class="span8 entry-content full-content" style='background-color: #FFF; padding: 10px;'>
          
<p>把博客程序切换的<a href="http://jekyllbootstrap.com">jekyll-bootstrap</a>。切换的原因是看中了它的几个优点：</p>

<ul>
  <li>有命令行工具。可以通过rake post命令创建日志。    </li>
  <li>支持插件。使用命令行控制plugin安装，更方便利用别人制作的插件，这点很重要。    </li>
  <li>可以定义页面风格，快速切换themes。    </li>
  <li>从头开始学习jekyll太耗费时间和精力。    </li>
</ul>

<p>切换的过程比较顺利，执行git merge，只有6个文件需要手工合并，而且没有严重冲突。合并完毕将代码提交到github即可。</p>


          <a href="/Technology/2012/08/06/jekyll-bootstrap.html" class="read_more span2 pull-right">[ Read More ]</a>
          <div class="clear"></div>
        </div>
        <div class="span3">
          
          <span>
            Posted in&nbsp;
            <ul>
            
              <li><a href="/categories.html#Technology-ref" title="Technology" rel="category tag">Technology</a></li>
            
            </ul>
          </span>
          
          
            <h4>Tags</h4>
            <ul class="tag_box">
            
            


  
     
    	<li><a href="/tags.html#jekyll-ref">jekyll <span>2</span></a></li>
     
    	<li><a href="/tags.html#jekyll-bootstrap-ref">jekyll-bootstrap <span>1</span></a></li>
    
  



            </ul>
           
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="rule"><hr/></div>
  
    <div class="full">
      <span class="date full-date">
        <abbr class="published" title="2012-07-18 00:00:00 +0800">18 Jul 2012</abbr>
      </span>
      <h3 class="entry-title">
        <a href="/SysAdmin/2012/07/18/mirror-debian.html" title="Debian镜像攻略" rel="bookmark">Debian镜像攻略</a>
      </h3>
      <p class="alt-font tight">
        <span>
          
        </span>
      </p>
      <div class="row">
        <div class="span8 entry-content full-content" style='background-color: #FFF; padding: 10px;'>
          <p><a href="http://www.debian.org/mirror/ftpmirror#how">Debian mirror官方文档</a></p>

<p>由于Debian各个版本的软件包容量都比较大（平均每个版本50G左右），需要量力而行，做好容量规划，不想要的包尽量设置exclude参数来排除。</p>

<p>官方文档提供的工具有bug，经询问已经修改，但是没有重新发布- -!囧</p>

          <a href="/SysAdmin/2012/07/18/mirror-debian.html" class="read_more span2 pull-right">[ Read More ]</a>
          <div class="clear"></div>
        </div>
        <div class="span3">
          
          <span>
            Posted in&nbsp;
            <ul>
            
              <li><a href="/categories.html#SysAdmin-ref" title="SysAdmin" rel="category tag">SysAdmin</a></li>
            
            </ul>
          </span>
          
          
            <h4>Tags</h4>
            <ul class="tag_box">
            
            


  
     
    	<li><a href="/tags.html#Debian-ref">Debian <span>1</span></a></li>
     
    	<li><a href="/tags.html#mirror-ref">mirror <span>2</span></a></li>
     
    	<li><a href="/tags.html#Shell-ref">Shell <span>2</span></a></li>
    
  



            </ul>
           
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="rule"><hr/></div>
  
    <div class="full">
      <span class="date full-date">
        <abbr class="published" title="2012-07-13 00:00:00 +0800">13 Jul 2012</abbr>
      </span>
      <h3 class="entry-title">
        <a href="/SysAdmin/2012/07/13/hadoop-scripting-basics.html" title="Hadoop scripting basics (draft)" rel="bookmark">Hadoop scripting basics (draft)</a>
      </h3>
      <p class="alt-font tight">
        <span>
          
        </span>
      </p>
      <div class="row">
        <div class="span8 entry-content full-content" style='background-color: #FFF; padding: 10px;'>
          <p>Links:</p>

<p><a href="http://hadoop.apache.org/">Hadoop Website</a></p>

<p><a href="http://www.slideshare.net/acarlos1000/hadoop-basics-presentation">Hadoop at Yahoo!</a></p>

<h1 id="setup">Setup</h1>

<p>TODO</p>

<h1 id="command-line-basics">Command line basics</h1>

<h2 id="environment-variables">ENVIRONMENT VARIABLES</h2>

<p>in ~/.bash_profile</p>

<pre><code># User specific environment and startup programs
JAVA_HOME=/opt/java
HADOOP_HOME=/opt/hadoop
HIVE_HOME=/opt/hive

PATH=$JAVA_HOME/bin:$HADOOP_HOME/bin:$HIVE_HOME/bin:$PATH:$HOME/bin

export PATH JAVA_HOME HADOOP_HOME
</code></pre>

<h2 id="hdfs---walk-around">HDFS - Walk around</h2>

<pre><code>hadoop fs -ls /
hadoop fs -du -h /data/
hadoop fs -dus /user/_myname_/
hadoop fs -tail /user/_myname_/my-test-file.txt
</code></pre>

<h2 id="submit-mapreduce-jobjar">Submit Map/Reduce Job(jar)</h2>

<h2 id="job-tracker">Job Tracker</h2>

<p>TODO</p>

<h1 id="streaming">Streaming</h1>
<p>Streaming(script)
&mdash;&mdash;</p>

<p>Usage:</p>

<pre><code> hadoop jar $STREAMING_JAR -mapper "$MAPPER" -file $MAPPER_FILE -reducer "$REDUCER" -file $REDUCER_FILE -input $RAW -output $SUMMARY -numReduceTasks 1

$STREAMING_JAR, $MAPPER_FILE, $REDUCER_FILE: files in local path.

$MAPPER，$REDUCER: commands run by hadoop.

$RAW, $SUMMARY: files in HDFS.
</code></pre>

<h2 id="streaming-examples">Streaming examples</h2>
<p>EXAMPLES: streaming/wc-demo.sh</p>

          <a href="/SysAdmin/2012/07/13/hadoop-scripting-basics.html" class="read_more span2 pull-right">[ Read More ]</a>
          <div class="clear"></div>
        </div>
        <div class="span3">
          
          <span>
            Posted in&nbsp;
            <ul>
            
              <li><a href="/categories.html#SysAdmin-ref" title="SysAdmin" rel="category tag">SysAdmin</a></li>
            
            </ul>
          </span>
          
          
            <h4>Tags</h4>
            <ul class="tag_box">
            
            


  
     
    	<li><a href="/tags.html#Hadoop-ref">Hadoop <span>1</span></a></li>
     
    	<li><a href="/tags.html#Streaming-ref">Streaming <span>1</span></a></li>
    
  



            </ul>
           
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="rule"><hr/></div>
  
  
  
    <div id="post-pagination" class="pagination pagination-centered">
  <ul class="pages nav nav-pills">

  
    <li>
    
      <a href="/">Previous</a>
    
    </li>
  

  
    <li class="page">
      <a href="/">1</a>
    </li>
  

  
    
    <li class="page active">
      <a href="#">2</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page3">3</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page4">4</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page5">5</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page6">6</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page7">7</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page8">8</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page9">9</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page10">10</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page11">11</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page12">12</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page13">13</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page14">14</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page15">15</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page16">16</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page17">17</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page18">18</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page19">19</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page20">20</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page21">21</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page22">22</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page23">23</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page24">24</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page25">25</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page26">26</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page27">27</a>
    </li>
    
  
    
    <li class="page">
      <a href="/page28">28</a>
    </li>
    
  

  
    <li>
      <a href="/page3">Next</a>
    </li>
  

  </ul>
</div>


  
  </div>

  <div class='span3 sidebar'>
    <section>
      <img src="/images/public/qrcode_for_gh_9329e4243e67_258.jpg" />
    </section>

    <section>
  <h1>归档</h1>
  <ul id="archive_posts">
  
    
    
    
      <li><a href="/archive.html#archive_2013">2013</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2012">2012</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2011">2011</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2010">2010</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2009">2009</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2008">2008</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2007">2007</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2006">2006</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2005">2005</a></li>
    
  
    
    
    
      <li><a href="/archive.html#archive_2004">2004</a></li>
    
  
    
    
    
  
    
    
    
  
    
    
    
      <li><a href="/archive.html#archive_2003">2003</a></li>
    
  
    
    
    
  
    
    
    
  
  </ul>
</section>


    <section>
      <a class='pull-right' href="/atom.xml"><i class="icon-star"></i>RSS</a>
    </section>
  </div>
</div>

      </div>

      <footer>
        <p>&copy; Liu Lantao 2012 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div> <!-- /container -->

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1658815-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  <script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

