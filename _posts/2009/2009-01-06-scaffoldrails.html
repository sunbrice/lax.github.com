---
layout: post
name: scaffoldrails
title: 从“Rails 2.2 / Scaffold功能增强”看Rails敏捷性的提高
time: 2009-01-06 22:47:00.000000000 +08:00
---
这几天看《Agile Web Development With Rails, 2nd Edition》（AWDWR），体验一下rails开发的敏捷。<br>不料第一个例子就卡住了。原来书上的例子所需要使用的方法是在rails1.2中有效的，而在rails2.2不被默认支持了。<br><br><br>我遇到的这个东西就是那个scaffold！从网上搜索发现大家都说要装plugin才能够使用，可是找到plugin的老巢也没看出什么门道。<br> 于是打开AWDWR,3rd edition beta电子书来看，才发现这个东西已经是可以直接作为script/generate的对象来使用了。<br><br><br>下面是成功的使用方式，创建一个product的scaffold：<br>---------------------------------------------<br>depot&gt; ruby script/generate scaffold product \<br> &gt; title:string description:text image_url:string<br>exists app/models/<br>exists app/controllers/<br>exists app/helpers/<br>create app/views/products<br>exists app/views/layouts/<br>exists test/functional/<br>exists test/unit/<br> exists public/stylesheets/<br>create app/views/products/index.html.erb<br>create app/views/products/show.html.erb<br>create app/views/products/new.html.erb<br>create app/views/products/edit.html.erb<br>create app/views/layouts/products.html.erb<br> create public/stylesheets/scaffold.css<br>create app/controllers/products_controller.rb<br>create test/functional/products_controller_test.rb<br>create app/helpers/products_helper.rb<br>route map.resources :products<br>dependency model<br> exists app/models/<br>exists test/unit/<br>exists test/fixtures/<br>create app/models/product.rb<br>create test/unit/product_test.rb<br>create test/fixtures/products.yml<br>create db/migrate<br>create db/migrate/20080601000001_create_products.rb<br> -------------------------------------------------------<br>从上面的输出可以看出，这个命令已经整合起原来的命令方式。<br><br>下面是原来的方式：<br>------------------------<br>script/generate model product 并且修改db/migrate下的任务<br>script/generate controller admin&nbsp; 并且修改app/controllers/admin下的admin_controller.rb，增加scaffold :product<br> ------------------------<br><br>下面的迁移任务还是同以前一样操作：<br>--------------------------------------------------------<br>depot&gt; rake db:migrate<br>(in /Users/rubys/work/depot)<br>== 20080601000001 CreateProducts: migrating ===================================<br> -- create_table(:products)<br>-&gt; 0.0027s<br>== 20080601000001 CreateProducts: migrated (0.0028s) ==========================<br>----------------------------------------------------<br><br>可以查看数据的版本：<br>----------------------------------------------------<br> depot&gt; sqlite3 db/development.sqlite3 &quot;select version from schema_migrations&quot;<br>20080601000001<br>---------------------------------------------------<br><br>启动服务器：<br>---------------------------------------------------<br> depot&gt; ruby script/server<br>=&gt; Booting WEBrick...<br>=&gt; Rails application started on <a href="http://0.0.0.0:3000">http://0.0.0.0:3000</a><br>=&gt; Ctrl-C to shutdown server; call with --help for options<br>[2008-03-27 11:54:55] INFO WEBrick 1.3.1<br> [2008-03-27 11:54:55] INFO ruby 1.8.6 (2007-09-24) [i486-linux]<br>[2008-03-27 11:54:55] INFO WEBrick::HTTPServer#start: pid=6200 port=3000<br>----------------------------------------------------<br><br>对比下两个版本中操作的便捷程度：<br> rails 1.2中， 输入命令 5 次，修改文件 2 处，<br>rails 2.2中，输入命令 3 次，修改文件 0 处。<br>可以明显看出新版的效率有了如此大的改进，真是让人欣喜。现在Rails仍然处于一个高速发展的阶段，相信不久它很快还能为我们带来更加便捷的开发方式。<br clear="all"><br>-- <br>Liu Lantao<br>College of Information Science and Technology, Beijing Normal University<br> EMAIL: liulantao ( at ) gmail ( dot ) com ; <br>WEBSITE: <a href="http://www.liulantao.com/">http://www.liulantao.com/</a> .<br>------<br> <div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/6152326-9013035094256112247?l=lltaichi.blogspot.com' alt='' /></div>
