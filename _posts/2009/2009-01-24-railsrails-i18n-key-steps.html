---
layout: post
name: railsrails-i18n-key-steps
title: Rails国际化的关键步骤。Rails I18n Key Steps.
time: 2009-01-24 13:35:00.000000000 +08:00
---
Rails I18n的关键点<br><br><br>1、设定locales文档。<br>config/locales/en.yml<br>------------------------------<br>en:<br>&nbsp; hello: &quot;Hello world&quot;<br>&nbsp; store: &quot;Store&quot;<br>------------------------------<br>config/locales/zh-CN.yml<br> ------------------------------<br>zh-CN:<br>&nbsp; hello: &quot;你好&quot;<br>&nbsp; store: &quot;商店&quot;<br>------------------------------<br>2、解析locale。<br>app/controller/application.rb<br>------------------------------<br>&nbsp; class ApplicationController &lt; ActionController::Base<br> &nbsp;&nbsp;&nbsp; before_filter :set_locale<br>&nbsp;&nbsp;&nbsp; def set_locale<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I18n.locale = params[:locale] || &#39;zh-CN&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #如果没有，则使用默认值。<br>&nbsp;&nbsp;&nbsp; end<br>&nbsp;&nbsp;&nbsp; ...<br>&nbsp; end<br>------------------------------<br>3、在控制器中读取变量<br>------------------------------<br> class StoreController &lt; ApplicationController<br>&nbsp; def index<br>&nbsp;&nbsp;&nbsp; @products = Product.find_products_for_sale<br>&nbsp;&nbsp;&nbsp; flash[:hello_flash] = t(:hello_flash)<br>&nbsp; end<br>&nbsp; ...<br>end<br>------------------------------<br> 4、在视图层中使用变量<br>------------------------------<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;% if flash[:hello_flash] -%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;div id=&quot;hello_flash&quot;&gt;&lt;%= flash[:hello_flash] %&gt;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;% end -%&gt;<br>------------------------------<br clear="all"> <br>-- <br>Liu Lantao<br>College of Information Science and Technology, Beijing Normal University<br>EMAIL: liulantao ( at ) gmail ( dot ) com ; <br>WEBSITE: <a href="http://www.liulantao.com/">http://www.liulantao.com/</a> .<br> ------<br> <div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/6152326-1526269392601880878?l=lltaichi.blogspot.com' alt='' /></div>
