---
layout: post
name: nagios
title: nagios中主机依赖与服务依赖
time: 2009-07-22 09:46:00.000000000 +08:00
---
主机依赖：A主机依赖于B主机<br><br>服务依赖：A服务依赖于B服务<br><br>服务依赖有几种情况：<br><br>A主机上的X服务依赖于A主机上的Y服务<br><br>A主机上的X服务依赖于B主机上的X服务<br><br>A主机上的X服务依赖于B主机上的Y服务<br><br> <br><br>依赖关系在主机和服务之间有很重要的地位。比如服务依赖的情况，很多服务都依赖于主机的可连接性，网页的可访问依赖于web服务器的状态。一般情况下，如果主机已经死掉，它上面的其它服务的监测也会失败。如果主机上的服务由不同的管理员负责，通过nagios进行检测，只需通报主机已经down掉的消息给系统管理员即可，因为即使得到其它相关服务无法访问的消息，其它服务管理员无力处理这个问题。nagios默认能够支持刚才提到的依赖。主机依赖也有相似的状况，比如A主机通过B主机连接网络提供服务，如果监测到B主机停止的话，则不再对A主机进行监测。<br> <br> <br><br>主机依赖 通过hostdependency进行定义。<br><br>参数格式定义<br><br>define hostdependency{<br>  host_name              host_name<br>  hostgroup_name      hostgroup_name<br>  dependent_host_name            host_name<br>  dependent_hostgroup_name    hostgroup_name<br>   inherits_parent                  [0/1]<br>  execution_failure_criteria     [o,d,u,p,n]<br>  notification_failure_criteria   [o,d,u,p,n]<br>  dependency_period              timeperiod_name<br>  }<br><br>o: OK; d: DOWN; u: UP; p:PENDDING; n:NONE.<br> <br> <br><br>实例<br><br>define hostdependency{<br>  host_name        WWW1<br>  dependent_host_name       DBASE1<br>  notification_failure_criteria        d,u<br>  }<br><br> <br><br>服务依赖 通过servicedependency进行定义。<br><br>参数格式定义：<br> <br>define servicedependency{<br>  host_name                 host_name<br>  hostgroup_name         hostgroup_name<br>  service_description       service_description<br>  dependent_host_name              host_name<br>  dependent_hostgroup_name      hostgroup_name<br>   dependent_service_description   service_description<br>  inherits_parent                  [0/1]<br>  execution_failure_criteria     [o,w,u,c,p,n]<br>  notification_failure_criteria   [o,w,u,c,p,n]<br>  dependency_period            timeperiod_name<br>   }<br><br>o: OK; w: WARNING; u: UP; c: CRITICAL; p: PENDDING; n:NONE;<br><br>实例：<br><br>define servicedependency{<br>  host_name             WWW1<br>  service_description             Apache Web Server<br>  dependent_host_name       WWW1<br>   dependent_service_description      Main Web Site<br>  execution_failure_criteria               n<br>  notification_failure_criteria             w,u,c<br>  }<br clear="all"><br>-- <br>Liu Lantao<br>College of Information Science and Technology, Beijing Normal University<br> EMAIL: liulantao ( at ) gmail ( dot ) com ; <br>WEBSITE: <a href="http://www.liulantao.com/">http://www.liulantao.com/</a> .<br>------<br> <div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/4666702678549991852-7312233985753379492?l=liulantao.blogspot.com' alt='' /></div>
